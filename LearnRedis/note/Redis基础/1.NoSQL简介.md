
# 1.NoSQL含义

NoSQL(NoSQL = Not Only SQL )，意即“不仅仅是SQL”，泛指非关系型的数据库 。随着互联网web2.0网站的兴起，传统的关系数据库在应付web2.0网站，
特别是超大规模和高并发的SNS类型的web2.0纯动态网站已经显得力不从心，
暴露了很多难以克服的问题，而非关系型的数据库则由于其本身的特点得到了非常迅速的发展。NoSQL数据库的产生就是为了解决大规模数据集合多重数据种类带来的挑战，
尤其是大数据应用难题，包括超大规模数据的存储。例如谷歌或Facebook每天为他们的用户收集万亿比特的数据。这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展。

## 1.1 NoSQL优势
- 具有非常高的读写性能，尤其在大数据量下，同样表现优秀
- 多样灵活的数据模型
- 种类繁多并且易于扩展

## 1.2 NoSQL VS RDBMS
RDBMS 
- 高度组织化结构化数据 
- 结构化查询语言（SQL） 
- 数据和关系都存储在单独的表中
- 数据操纵语言，数据定义语言 
- 严格的一致性 
- 基础事务 

NoSQL 
- 代表着不仅仅是SQL 
- 没有声明性查询语言 
- 没有预定义的模式 
- 键 - 值对存储，列存储，文档存储，图形数据库 
- 最终一致性，而非ACID属性 
- 非结构化和不可预知的数据 
- CAP定理 
- 高性能，高可用性和可伸缩性 

# 2.NoSQL数据模型
> BSON（）是一种类json的一种二进制形式的存储格式，简称Binary JSON，它和JSON一样，支持内嵌的文档对象和数组对象。

大体分为四种数据模型:
- KV键值 (Redis)
- BSON (MongoDB)
- 列族 (HBase)
- 图形 (Neo4J)

> 了解即可

# 3.CAP理论
## 3.1 传统数据库ACID
首先复习下传统数据库的四大特性:

- Atomicity 原子性 
> 原子性很容易理解，也就是说事务里的所有操作要么全部做完，要么都不做，事务成功的条件是事务里的所有操作都成功，只要有一个操作失败，整个事务就失败，需要回滚。比如银行转账。 

- Consistency 一致性 
> 一致性也比较容易理解，也就是说数据库要一直处于一致的状态，事务的运行不会改变数据库原本的一致性约束。 

- Isolation 独立性 
> 所谓的独立性是指并发的事务之间不会互相影响，如果一个事务要访问的数据正在被另外一个事务修改，只要另外一个事务未提交，它所访问的数据就不受未提交事务的影响。

- Durability 持久性 
> 持久性是指一旦事务提交后，它所做的修改将会永久的保存在数据库上，即使出现宕机也不会丢失。 

## 3.2 CAP
- Consistency（强一致性）
- Availability（可用性）
- Partition tolerance（分区容错性）

CAP理论的核心是：一个分布式系统不可能同时很好的满足一致性，可用性和分区容错性这三个需求，最多只能同时较好的满足两个。 
因此，根据 CAP 原理将 NoSQL 数据库分成了满足 CA 原则、满足 CP 原则和满足 AP 原则三 大类： 
- CA - 单点集群，满足一致性，可用性的系统，通常在可扩展性上不太强大。 
- CP - 满足一致性，分区容忍必的系统，通常性能不是特别高。 
- AP - 满足可用性，分区容忍性的系统，通常可能对一致性要求低一些。


![](https://raw.githubusercontent.com/lujiahao0708/PicRepo/master/blogPic/Redis/Redis%E5%9F%BA%E7%A1%80/%E7%BB%8F%E5%85%B8CAP%E5%9B%BE.png)

## 3.3 BASE 理论
BASE就是为了解决关系数据库强一致性引起的问题而引起的可用性降低而提出的解决方案。 

BASE其实是下面三个术语的缩写： 
- 基本可用（Basically Available） 
- 软状态（Soft state） 
- 最终一致（Eventually consistent） 

它的思想是通过让系统放松对某一时刻数据一致性的要求来换取系统整体伸缩性和性能上改观。为什么这么说呢，缘由就在于大型系统往往由于地域分布和极高性能的要求，不可能采用分布式事务来完成这些指标，要想获得这些指标，我们必须采用另外一种方式来完成，这里BASE就是解决这个问题的办法。



